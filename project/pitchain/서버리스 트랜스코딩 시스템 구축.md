## 동영상 스트리밍 프로토콜 선택
사용자의 네트워크 품질에 맞춰 적절한 품질의 영상을 제공할 수 있는 HLS(HTTP Live Streaming) 프로토콜을 선택

## 트랜스코딩 시스템 구축
#### AWS Elemental MediaConvert
<img src="https://github.com/user-attachments/assets/ccd538e5-d9c8-43ff-907e-c1d8bf344ce3" width="500" height="500"/>

- AWS에서 제공하는 미디어 서비스
- 장점
  - 구현이 간편하다
  - 확장성(Scaling) / 고가용성(High Availability)이 뛰어남, 개발자가 신경을 많이 안 써도 됨
- 단점
  - 모든 장점을 상쇄하는.. 비용 문제. 비싸다!
  - 출력 영상의 길이를 분당 요금으로 계산하기 때문에, 다양한 품질로 출력하는 HLS 전환의 경우 비용이 더욱 많이 나온다.
  - 구글링해본 결과 현업에서는 비용 문제 때문에 결국 아키텍처를 직접 구현하는 경우가 많았다.

결론적으로 비용 문제 때문에 직접 시스템을 구축할 수밖에 없었다.

#### 서버리스 트랜스코딩 시스템(오픈소스 FFmpeg + AWS Lambda)
<img src="https://github.com/user-attachments/assets/2c48b949-faf3-4b49-8c1e-f1a463239988" width="550" height="300"/>

- 기술 선택이유 
  - 3분 내외의 숏폼 영상을 대상으로 하는 서비스였기 때문에 서버리스 서비스로 충분할 것이라고 판단했다.
  - AWS Elemental MediaConvert보다 저렴한 비용
  - 마찬가지로 서버를 운영하지 않아도 되기 때문에 FFmpeg 코드만 있으면 구현이 간편하다.

## 효과
결론적으로 자체적으로 아키텍처를 구현하여 비용을 크게 절감할 수 있었다.

3분 길이의 영상(1080p)를 (1080p, 720p, 360p, 240p)로 트랜스코딩한다고 가정
- AWS Elemental MediaConvert 요금
  - 베이직 티어 적용, 품질별 승수 곱함
  - 0.051(HD) * 2 + 0.0255(SD) * 2 = 0.153 USD
- 서버리스 트랜스코딩 시스템 요금
  - 최대 메모리 기준 (10,240MB) 0.027 USD

비용이 약 5.7배 차이 난다.

아쉬운 점은 시간적인 부분에서의 성능 비교를 하지 못한 점인데, 해당 프로젝트를 진행할 때 업로드 기능은 시현 대상이 아니었기 때문에
비용적인 측면만 고려하여 서버리스 서비스를 선택했다.
